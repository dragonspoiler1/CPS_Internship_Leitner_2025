#!/usr/bin/env pybricks-micropython

from machine import Pin
import time

class EV3PowerController:
    def __init__(self):
        self.ports = [
            Pin(17, Pin.OUT),  # EV3 1
            Pin(16, Pin.OUT),  # EV3 2
            Pin(15, Pin.OUT)   # EV3 3
        ]
        self.reset_all()
    
    def reset_all(self):
        for port in self.ports:
            port.off()  # Ports deaktivieren
        time.sleep(1)
    
    def power_on(self, ev3_num, duration=5):
        if 0 <= ev3_num < len(self.ports):
            print(f"Starte EV3 {ev3_num+1}")
            self.ports[ev3_num].on()
            time.sleep(duration)
            self.ports[ev3_num].off()
            return True
        return False

# Initialisierung und Startsequenz
controller = EV3PowerController()

# EV3s nacheinander starten
for i in range(1):
    controller.power_on(i)
    time.sleep(10)  # Warte zwischen den Starts